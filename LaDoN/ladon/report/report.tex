\documentclass{article}
\usepackage[utf8]{inputenc}
\usepackage[english]{babel}
\usepackage{apacite}
\usepackage{graphicx}
\usepackage{mathptmx}
\usepackage{amsmath}
\usepackage{multirow}
\usepackage[font = {small, it}]{caption}
\DeclareCaptionLabelFormat{cont}{#1~#2\alph{ContinuedFloat}}
\captionsetup[ContinuedFloat]{labelformat=cont}
%\usepackage{subcaption}
\usepackage{subfigure}
\usepackage{float}
\usepackage{fancyhdr}
\usepackage{listings}

\lstset{language=Python}

%% CHANGE MARGINS

\addtolength{\oddsidemargin}{-.875in}
\addtolength{\evensidemargin}{-.875in}
\addtolength{\textwidth}{1.75in}

\addtolength{\topmargin}{-.875in}
\addtolength{\textheight}{1.75in}

%% make header

\fancypagestyle{plain}{
\fancyhf{}
\rhead{Mikkel Werling (201706722)}
\lhead{Unfriending facilitates cooperation}
\cfoot{\thepage}
}
\pagestyle{plain}

\setlength{\parindent}{2em}
\setlength{\parskip}{1em}
\renewcommand{\baselinestretch}{1.5}

\title{Unfriending facilitates cooperation: \\Co-evolution of opinion and network dynamics}
\author{Mikkel Werling, (201706722)}
\date{}
\begin{document}
\maketitle
\tableofcontents

\section{Introduction}

\subsection{Polarization, echo chambers and the threat to democracy}

\section{Motivation of the framework}
\subsection{Agent-based models of complex issues}

\section{Central Mechanisms}
\subsection{Homophily}
\subsubsection{Explaining Homophily}
\subsection{Social Influence}
\section{Opinion Dynamics}
\section{Network Formation}
\subsection{Triadic Closure}

\section{Co-evolution}
\subsection{Tie-deletion as the co-evolutionary mechanism}

\section{Model Description}
\subsection{Conceptual overview}
The model consists of agents situated in an undirected network. Nodes on the network represent social agents. Edges represent social ties to other agents. 
The model simulates social interactions between the agents without agents having any strategy or task. 

\subsection{Assumptions}
It is assumed that the opinion of an agent is shaped only by her initial opinion and the influence of her peers. 
The model assumes that agents will compromise their opinion when interacting with agents with similar opinions. 
When agents interact with agents dissimilar from them, the model assumes that agents will either not change their opinion or they will become more opposed by the interactions.
Furthermore, it is assumed that connections between agents are not static but dynamic in nature. 
Specifically, the model assumes that agents will find new connections primarily through their already existing connections. In other words, 
agents primarily find new friends via "friends of friends". Finally, it is assumed that agents will tend to relinguish ties to agents too dissimilar from themselves.
All these assumptions can vary in the strength of the proposed effect. For instance, similar agents could reach a perfect compromise or only convince each other slightly. 
As the results of the model critically hinges on the strength of these assumptions, I introduce model parameters that control the strength of these mechanisms.


\subsection{Components and their properties}
The model is specified by four different parameters. 
The first three describe how interactions change opinions ($\alpha$, $\beta$, $T$). 
The fourth parameter specifies the probability of dissoluting negative ties ($D$).
The specifics of how they influence the model is specified in "Dynamics".  

To limit the combinations of different values, we limit the possible values of the different parameters with the following:


\begin{align*}
    \alpha \in & \{0.05, 0.10, 0.15, 0.20, 0.25\} \\
    \beta \in & \{0.00, 0.05, 0.10, 0.15, 0.20, 0.25\}\\
    T \in & \{0.8, 0.9, 1.0, 1.1, 1.2\}\\
    D \in & \{0.0, 0.2, 0.4, 0.6, 0.8, 1.0\}
\end{align*}


\subsection{Initialization}
A random Watts-Strogatz small-world graph is created 
with $N=500$, $k=7$, and $p=0.5$. For each node in the network,
an agent is initialized with a value ($O_i$) which is taken to represent the opinion of the agent. The opinion is modelled as a continous number between -1 and 1. 
The idea is to represent that opinions can be anywhere inbetween extremely pro and extremely against a proposition.
To initialize the model, we start of with a diverse set of opinions. All values of $O_i$ are initialized by drawing from a uniform distribution between -1 and 1: 
$$O_i \sim U(-1, 1)$$

\subsection{Dynamics}

\subsubsection{Sampling agents and interactions}

The model is an attempt at representing social encounters and their change over time. 
To represent this idea, agents interact with each other over a certain amount of time-steps. 
During such a time-step, an agent will encounter a new connection. 
At every timestep ($t$) a random agent ($A_t$) is sampled from the network ($N_t$). This agent creates a new edge to another agent in the network. The network occationally deletes edges.
To keep the number of edges in the network approximately constant, edges are either created or rewired to account for deleted edges. 
To do this, let $E_1$ be the number of edges of $N_1$ and let $E_t$ be the number of edges of $N_t$. 
If $E_t < E_1$, $A_t$ will not rewire one of its existing edges, but instead create a new edge. If $E_t \geq E_1$, $A_t$ will rewire one of its existing connections to the new agents.
With a probability of $R$, $A_t$ connects to a random agent, that $A_t$ is not currently connected to. 
With a probability of $1-R$, $A_t$ connects to one of its edge's edges. Regardless of whether the connection was sampled randomly or through an edge's edges, let $C_t$ define the newly connected agent.
In the rest of the paper, we will only consider $R=0.1$. The reason for this is that this shows very little effect on the overall results, and low randomness is in line with empirical findings on the tie formation.

In order to calculate the average path length of the network, the model is restricted to being only one component. 
To ensure this property, we check the degree of $A_t$ and $C_t$. If the degree of either $A_t$ or $C_t$ is 0, a new edge is created randomly to a new node from $N_t$.
If both $A_t$ and $C_t$ have degrees larger than 0, and the network has more than one component, a new edge is created to restore the network. Specifically, we restore the edge that $A_t$ rewired to $C_t$, while keeping the edge from $A_t$ to $C_t$.
I will refer to the process of ensuring only one connected component simply as component ensurance. 

\subsubsection{Interaction between neighbors}
After finding a new connection, the agents interact with each other. This is meant to represent 
discussion, statements or other social interactions between agents. 
Social interactions between similar individuals will lead to compromise between their initial opinion and their opinion after the encounter.
As a consequence, the more you disagree with a person, the more mallable your opinion is. If you reach a compromise with a person with a very different opinion than yours,
you will change your opinion more dramatically than if you reached a compromise with someone that you almost agree with. 
To model this kind of behavior, the randomly sampled agent, $A_t$, interacts with all its connected agents and changes its opinions according to the opinion of the connected agents.
This is done by iteratively interacting with every edge of $A_t$. Let $B$ denote an edge of $A_t$. Let $O(\cdot)$ define a function with agents as inputs and their opinions as outputs.
The interaction between two different agents is determined by a threshold value, $T$. 

When $T \geq |O(A_t) - O(B)|$, the interaction will pull the opinions of the two agents closer to each other. The force with which they are pulled is defined as a fraction of their distance from each other:
$$V_p = \big(|O(A_t) - O(B)|\big) \cdot \frac{\alpha}{2}$$

Let $O_{max} = \max(O(A_t), O(B))$ and $O_{min} = \min(O(A_t), O(B))$ and update the values of opinions by:

$$O_{max} = O_{max} - V_p$$
$$O_{min} = O_{min} + V_p$$

When $T < |O(A_t) - O(B)|$, the interaction will push the opinions of the two agents further apart by a similar principle as illustrated above: 

$$V_n = \big(|O(A_t) - O(B)|\big) \cdot \frac{\beta}{2}$$

Using the same definition for $O_{max}$ and $O_{min}$, we update the opinions of each agent:

$$O_{max} = O_{max} + V_n$$
$$O_{min} = O_{min} - V_n$$

This process concludes when $A_t$ has updated her values for all her edges.

\subsubsection{Tie-dissolution}
After interacting with her connected agents, $A_t$ might delete the connection to some of these agents based on their similarity.
In this model, social interactions can result in opinions becoming more distant than they were initially. 
This can be because what the agents are discussing is divisive or controversial. When this happens, connections can be severed.
I call this process tie-dissolution. 
If $T < |O(A_t) - O(B)|$, there is a chance that their tie is dissoluted after interacting. This probability of dissolution between dissimilar agents in the model is described by the parameter $D$.
When $D = 1$, all dissimilar ties are severed. When $D = 0.5$, there is 50\% chance that dissimilar ties will be deleted. 
After ties are dissoluted, the process of component ensurance is performed where $C_t$ is replaced with $B$.
When all edges of $A_t$ have been evaluated, the time-step concludes. This process is repeated for 10.000 time-steps.

\subsection{Outcome metrics} 

\subsubsection{Time-dependent Metrics}
Every 20th time-step, the current state of the network is recorded. 
To track the polarization of opinions over time,
the mean and standard deviation of the absolute value of opinions are recorded.
To track the similarity of an agent's opinion to the opinion of their neighors, the average distance to all edges are recorded.
To evaluate the effect of tie-dissolution, the cumulative frequency of tie-dissolutions are recorded.
For characterizing the network, I record the average clustering coefficient, average path length and degree assortativity coefficient.

\subsubsection{Final State Metrics}
After 10.000 time-steps, the network reaches its final state and its characteristics are recorded. 
For every agent in the network, I record: 
\begin{itemize}
    \item The initial opinion of the agent
    \item The opinion of the agent at the final state of the network
    \item The mean distance to all neighbors' opinions
    \item The degree of the agent 
    \item The betweeness centrality of the agent 
    \item The clustering coefficient of the agent 
\end{itemize}

The measures related to the opinion of agents can then be correlated with clustering, centrality and degrees to see how changes in network topology relate to changes in opinions. 

\section{Model Evaluation}

\section{Data}

\subsection{Hyperparameter Optimization}

\begin{figure}[H]
\begin{center}
    
\begin{tabular}{ |p{3cm}||p{2cm}|p{2cm}|p{2cm}|p{2cm}|p{2cm}|}
    \hline
    \multicolumn{6}{|c|}{Table of best parameter values} \\
    \hline
    \bf{Network} & Randomness & Threshold & $\alpha$ & $\beta$ & $P(D)$\\
    \hline
    Dolphins   & 0.003    &0.531&   0.202&   0.095&   0.111\\
    Karate Club&   0.870  & 0.137   &0.282&   0.090&   0.911\\
    Citation Network   &0.060 & 0.655&  0.389&   0.493&   0.150\\
    Political Books &0.004 & 0.222&  0.075&   0.144&   0.508\\
    Politicians&   0.014  & 0.101 &0.050&   0.014&   0.229\\
    Political Blogs & 0.109  & 0.100   &0.246&   0.007&   0.249\\
    \hline
\end{tabular}
\end{center}
\end{figure}

\subsection{Why is co-evolution a better explanation?}

\section{Results}

\subsection{Alpha, beta, threshold, tie-deletion and chaotic systems}

\subsection{Correlations}

\section{Discussion}

\subsection{Reiterating previous literature}

\subsection{Tie-deletion facilitates cooperation}

\subsection{The effect of initial opinions}

\subsection{Distance in opinion and network space}

\section{Short comings and future work}

\subsection{Accurate perceptions of opinions}

\subsection{Social influence exclusively}

\section{A broader perspective}

\section{Conclusion}

\bibliographystyle{apacite}

\bibliography{../Referencer_new}

\end{document}