\documentclass{article}
\usepackage[utf8]{inputenc}
\usepackage[english]{babel}
\usepackage{apacite}
\usepackage{graphicx}
\usepackage{mathptmx}
\usepackage{amsmath}
\usepackage{multirow}
\usepackage[font = {small, it}]{caption}
\DeclareCaptionLabelFormat{cont}{#1~#2\alph{ContinuedFloat}}
\captionsetup[ContinuedFloat]{labelformat=cont}
%\usepackage{subcaption}
\usepackage{subfigure}
\usepackage{float}
\usepackage{fancyhdr}
\usepackage{listings}
\usepackage{mathtools, nccmath}
\usepackage{algorithm}
\usepackage{algorithmic}

\DeclarePairedDelimiter{\nint}\lfloor\rceil
\DeclarePairedDelimiter{\abs}\lvert\rvert

\lstset{language=Python}

%% CHANGE MARGINS

\addtolength{\oddsidemargin}{-.875in}
\addtolength{\evensidemargin}{-.875in}
\addtolength{\textwidth}{1.75in}

\addtolength{\topmargin}{-.875in}
\addtolength{\textheight}{1.75in}

%% make header

\fancypagestyle{plain}{
\fancyhf{}
\rhead{Mikkel Werling (201706722)}
\lhead{Unfriending facilitates cooperation}
\cfoot{\thepage}
}
\pagestyle{plain}

\setlength{\parindent}{2em}
\setlength{\parskip}{1em}
\renewcommand{\baselinestretch}{1.5}

\title{Unfriending facilitates cooperation: \\Co-evolution of opinion and network dynamics}
\author{Mikkel Werling (201706722)}
\date{}
\begin{document}
\maketitle
\begin{abstract}
  \noindent Countries around the world are experiencing polarization of opinions and echo chambers of information \cite{del_vicario_echo_2016,tsai_echo_2020,sasahara_social_2021}. 
  This makes cooperation significantly harder, as reaching a compromise becomes more challenging \cite{boxell_cross-country_2020}. 
  Discovering what conditions facilitate cooperation is therefore a pertinent subject. 
  Several models in the field of opinion dynamics have been made to illuminate what central mechanisms can lead to polarization \cite{flache_models_2017}.
  However, many of these models do not capture essential features such as the co-evolution of network and opinions. Moreover, many of these models fail to incorporate empirical data into the evaluation of their models \cite{flache_models_2017,galesic_integrating_2021}.
  Recent work in the literature reports that homophily can accelerate polarization \cite{sasahara_social_2021, taylor_exploring_2018}. 
  Related work in the field of computational biology shows that homophily or positive assortment can facilitate cooperation \cite{carter2015phenotypic, pepper_mechanism_2002,dakin_dynamic_2018, santos_cooperation_2006}. 
  This paper investigates a co-evolutionary model of opinion and network dynamics to fill the gap in the current literature of considering co-evolution as a vital mechanism in opinion dynamics. This is done by combining a simple bounded confidence model from opinion dynamics with a simple network formation algorithm based on triadic closure \cite{jackson_meeting_2007}, where the two mechanisms co-evolve.
  To address the lack of empirical data integration, this paper uses cutting edge hyperparameter optimization algorithms to assess network formation models and co-evolutionary models \cite{krivorotko2022agent,akiba_optuna_2019}. 
  Co-evolution models is found to be better explanations of real empirical networks when these networks are large and opinionated. 
  Contrary to recent findings, the main result of this paper is that avoiding polarization is facilitated by the deletion of ties between dissimilar agents, echoing the findings from computational biology.
  Increasing how random new connections are is also found to increase polarization, which recapitulates previous conclusions in the field \cite{turner_paths_2018,flache_why_2006,flache_small_2011}
  Finally, when unproductive ties are deleted, average path length and polarization of opinions become highly correlated. This tendency is also found in real social networks, where distance in the network correlates highly with distance in similariy between individuals \cite{kossinets_origins_2009}. 
  In sum, the paper points to critical dependencies between the evolution of opinions and networks.
  
  \noindent \textbf{Keywords:} \textit{agent-based modelling, opinion dynamics, social influence, co-evolution, social networks}
\end{abstract}

\tableofcontents
\newpage
\section{Introduction}

\subsection{Polarization, echo chambers and the threat to democracy}

Democracies around the world are experiencing increased amounts of polarization \cite{boxell_cross-country_2020,mccoy_polarization_2018, somer_deja_2018}. As a result, making decisions by cooperating with other people becomes harder which can severely damage the ability of democratic systems to solve problems \cite{andris_rise_2015,levin_dynamics_2021,mccoy_polarization_2018}. A striking recent example is uniquely severe rise of polarization of the political system in the United States \cite{dimock_america_2020}. During the last two decades, the amount of overlap of opinions between the two political parties have decreased substantially, which has led to gridlock, government shutdowns and failure to enact new legislation \cite{andris_rise_2015, pew_research_center_political_2014-1}. A similar increase can be observed in terms of affective polarization. Affective polarization refers to how much citizens carry more negative feelings towards other political parties than their own \cite{boxell_cross-country_2020, iyengar_origins_2019}. Once again, the United States is reported to have uniquely high amounts of affective polarization \cite{boxell_cross-country_2020}. Although the United States is unique in the extent of affective polarization, they are not the only country experiencing an increase in affective polarization. Countries such as France, Switzerland and Denmark has seen increased levels of affective polarization in the last two decades \cite{boxell_cross-country_2020}. Polarization is in other words a general trend, affecting countries around the world \cite{mccoy_polarization_2018, somer_deja_2018, wilson_polarization_2020}. With that said, polarization of opinions does not seem to be an inevitable state for democracies. During the last two decades, a number of European democracies have experienced higher degrees of consensus and less affective polarization, which includes Sweden, Norway and Germany \cite{boxell_cross-country_2020}. 

There is reason to believe that the problem of polarization might be getting worse due to the rise of the internet and social media more specifically. Because information is cated to the individual based on their previous search history and behavior, what information one is exposed to is unlikely to be shared with people very different from you. One is instead only exposed to the information that passes through what is called information filters. Informational filters can create situations where almost all opinions one is exposed to are congruent with one’s believe, popularized under the term echo chambers on social media \cite{baumann_modeling_2020, sasahara_social_2021, tsai_echo_2020}. Relatedly, higher involvement in one’s echo chamber correlates with more negative emotions in terms of valence, which suggests that echo chambers are largely driven by outrage \cite{del_vicario_echo_2016}. With regards to polarization, the internet can be seen as a “mixed blessing” – it can drive opinions closer together by diversifying information, but it also enables encounters of opposing opinions by chance, which can increase polarization \cite{lev-on_happy_2009}. This points to a certain tension between how much exposure to different opinions affects polarization. When presented with diversifying views, people generally decrease negative affects to other political parties \cite{levy_social_2021}, but exposure to opposing views can cause opinions to become more polarized \cite{bail_exposure_2018}. 

Although polarization is usually referred to as a political phenomenon, polarization is important for any social system in order to cooperate successfully. It is therefore important that we understand what mechanisms can lead a system to polarization, to consensus or anywhere in between the two extremes. This is no easy task, as opinion formation is a highly complex phenomena \cite{baumann_modeling_2021}. 
Nevertheless, an entire field has been dedicated to study how opinions change. The study of the dynamics shaping opinions is aptly named opinion dynamics. The models from opinion dynamics are often analogous models, drawing inspiration from statistical physics in how they build their models \cite{galesic_integrating_2021}. The models considered in opinion dynamics include models of discrete and continous opinions. The field has a rich history of research on how opinions change using experimental data in combination with formal models \cite{baumann_modeling_2021,chacoma_opinion_2015,flache_models_2017,friedkin_social_1990,noorazar_classical_2020,spears_social_2021,turner_paths_2018}. These models normally focus on mechanisms of social influence, where interactions between agents shape the agents’ opinions over time \cite{flache_models_2017}. Of special interest to this paper, the models typically assume a static network structure in which agents are situated \cite{galesic_integrating_2021}. This fails to take into account that networks are dynamic and co-evolves with opinions \cite{ferraz_de_arruda_modelling_2022,galesic_integrating_2021}. The interdependence between the dynamics of social networks and opinion dynamics is largely understudied, despite the fact that the two processes seem to influence each other in important ways \cite{asikainen_cumulative_2020,bruch_agent-based_2015,galesic_integrating_2021,kossinets_origins_2009,noorazar_classical_2020}. The dynamic relation between the network structure and social influence has often been reported as an important avenue for future research \cite{flache_models_2017,galesic_integrating_2021}. 

Arguably, an even more important avenue to gain insights into is how to better incorporate empirical data into models of opinion dynamics. This is reasoned by the fact that the field of opinion dynamics as a whole seems to have an issue of including empirical data in their models \cite{galesic_integrating_2021,flache_models_2017}. 
This is most likely because opinions are hard to measure, but also because the field of opinion dynamics predominantly uses simulations and formal models to study their systems of interest. This is important because it often leads to models which are not evaluated in terms of how well they correspond to the real world \cite{flache_models_2017,galesic_integrating_2021}. If we want to get closer to the answers of how opinions are formed in social networks, we need to make better use of the empirical data available as well as evaluate how well our models can explain the observed patterns of opinionated social networks. 

\noindent This paper seeks to investigating the co-evolution of the dynamics of opinions and networks by combining simple models based on insights from cognitive science, social psychology, computational biology and network science \cite{asikainen_cumulative_2020,flache_models_2017,ilany_social_2016,jackson_meeting_2007,santos_cooperation_2006}. This paper seeks to start filling the gap in the literature concerning the interconnected dynamics of networks and opinions. This is done by investigating a co-evolutionary agent-based model of opinion and network dynamics. The model is specifically designed to allow for the considering of the impact that opinions have on social networks and vice versa. In order to investigate how opinion dynamics influences social networks, this paper attempts to estimate quantitatively how well the proposed network formation models fit empirical social networks. The investigation primarily focuses on the difference in performance between co-evolutionary models and their network formation counterparts. To investigate how network dynamics influences opinion dynamics, the dynamics of the networks are changed and the resulting change in opinions are examined. This leads to the central question that this paper will try to provide answers to. Namely, this paper’s central interest is to investigate what the effect of tie-deletion to dissimilar others has on facilitating cooperation. 


\section{Agent-based modelling of complex phenomena}
In order to get sufficiently good answers to our questions, we need to build sufficiently good models. 
When it comes to models of opinion dynamics, this is no easy task. 
The social systems underlying opinion dynamics are complex and complicated. 
The change of opinions is both a cognitive matter of updating one’s belief, but also a social matter of being exposed to different perspectives \cite{flache_models_2017,friedkin_social_1990,spears_social_2021}. 
Models that do incorporate realistic social and cognitive mechanisms are typically verbal models. 
Although these verbal models often provide rich and detailed accounts with realistic mechanisms, they lack the precision of formal models \cite{fogarty_ten_2022,galesic_integrating_2021,smaldino_how_2020}. 
Agent-based models are well-equipped to strike a balance between the two types of models \cite{flache_between_2018,galesic_integrating_2021,epstein1999agent,mas2014cultural}. This is done by investigating the macro-behaviors of a system, where the micro-behaviors are specified \cite{bruch_agent-based_2015,epstein1999agent,flache_between_2018}. In particular, agent-based models are well suited for analyzing interactions between individuals instead of between variables \cite{geschke2019triple}.As is the case with any model, the results critically hinge on the assumptions of the model. It is therefore the role of the modeler to provide as empirically plausible mechanisms as possible for the system of study \cite{crooks2012introduction,epstein1999agent,page2010diversity}. At the same time, the value of a model is in its simplification of reality. The model should be as simple as it can be and as complicated as it needs to be in order to answer the questions of interest \cite{smaldino_how_2020}. The hope is that by simplifying the system to a sufficient extent, we can observe and understand some important features of even extremely complex systems \cite{fogarty_ten_2022,smaldino_how_2020}. The modeler’s job is to strike this balance between realism and simplicity by including only the most central mechanisms of the system in their model \cite{smaldino_models_2016}. 

The rest of the introduction will review the empirical literature and try to find the central mechanisms that needs to be included in the agent-based model. To incorporate these mechanisms in the model of this paper, we turn to identifying key aspects of how social interactions shape opinions and how networks change over time. We start by considering key features of social interactions. Here, we will focus on homophily as well as positive and negative social influence. Thereafter, we turn to network dynamics and discuss the central role of triadic closure in how networks are shaped over time.

\section{Central Mechanisms}
\subsection{Homophily}
One of the most robust findings of the social world is summed up in the now famous phrase "birds of a feather flock together" \cite{mcpherson_birds_2001}. This phrase refers to the fact that assortment in humans is non-random, and is often based on similarity of traits between individuals \cite{asikainen_cumulative_2020,crandall_feedback_2008,mcpherson_birds_2001}. Almost everywhere researchers look, what they find is that you are more likely to engage with other individuals that are similar to you \cite{taylor_exploring_2018}. This is true for almost all demographic variables which have been investigated, which includes gender, race, religion, and socioeconomic class \cite{asikainen_cumulative_2020,mcpherson_birds_2001}. 
This tendency is refered to as observed homophily in the literature \cite{kossinets_origins_2009,mcpherson_birds_2001}. On the face of it, observed homophily seems very intuitive. It is reasonable to assume that you have more in common with your friends than you have with strangers. 
Kossinets \& Watts (2009) seeked to estimate how observed homophily manifested in real dynamical social networks. They recorded social interactions on a large university over the course of a year. Their findings not only suggests that this intuitive notion is true, but that it is a special case of a more general phenomenon. The findings suggests that distance in similarity is a function of distance in the social network (see Fig 1). The further you are removed from someone in the social network, the less you will have in common \cite{kossinets_origins_2009}. The connection between distance in similarity and distance in the social network seems to be a robust finding of social networks \cite{bener_empirical_2016,crandall_feedback_2008}.
But why is this the case? The normal explanation includes two central dynamics. The first is that people tend to choose new friends that are similiar to themselves. The second is that friends tends to become more similar as a result of social interactions \cite{crandall_feedback_2008}. 

\begin{figure}[H]
    \centering
    \includegraphics[width=.8\linewidth]{../plots/references/kossinets_watts_distance.jpeg}
  \caption{The link between distance and similarity. Adapted from \protect\citeauthor{kossinets_origins_2009} \protect\citeyear{kossinets_origins_2009}. X-axis shows the distance in the network to other agents. Y-axis shows the average similarity between agents.}
  \label{fig:distance_similarity}
\end{figure}

\subsubsection{Explaining Homophily}
Homophily is traditionally explained as a psychological preference for similar people \cite{asikainen_cumulative_2020,mcpherson_birds_2001,winter_you_2020}. Interacting primarily with similar people ensures easier communication and enhances the individual’s ability to predict the other person’s behavior \cite{kossinets_origins_2009,winter_you_2020}. Assorting based on similarity might facilitate cooperation, because coordination between similar individuals is simpler and less costly for the individual \cite{winter_you_2020,carter2015phenotypic}. This psychological explanation of the homophilic preference of individuals seems sufficient to explain the phenomenon of homophily, but structural constraints could also limit how dissimilar choices of interactions are available to a person \cite{peixoto_disentangling_2022}. If you work as a female nurse, chances are that most of your interactions at work will be with other females. In this case, even if you do not have a strong psychological preference for interacting with people like yourself, the social interactions available to you might primarily be people like yourself. In this scenario, there will be high observed homophily by sheer chance. The existing assortment in the network makes the probability of interacting with similar individuals much higher than with non-similar individuals \cite{peixoto_disentangling_2022}. These structural constrains are of course not exclusive to gender or workplaces. Other examples include socio-economic status and the neighborhood you live in and preference in music and what concerts you attend \cite{mcpherson_birds_2001}. In other words, the psychological and the structural factor contributing to observed homophilic interactions are not mutually exclusive but might instead facilitate each other \cite{asikainen_cumulative_2020}. Even a little psychological homophilic preference could turn into structural factors over the course of time \cite{asikainen_cumulative_2020,kossinets_origins_2009,taylor_exploring_2018}. Empirical work points to both psychological and structural homophily being important mechanisms, but suggests that structural homophily might be a more powerful mechanism for finding new connections in a social network \cite{bener_empirical_2016,kossinets_origins_2009}.
As mentioned, the observed general finding of assortment in networks are not only based on selecting friends based on similarity. It is also due to the fact that humans interact with their social ties, which typically increases similarity \cite{friedkin_social_1990,spears_social_2021}. The combined mechanism of social interactions in shaping opinions is called social influence and is what we turn our attention to next. 

\subsection{Social Influence}
Humans are inherently a social species. We think and form our opinions by discussing them with other people. 
Either via social media, debates or discussions with friends, opinions are constantly being shared between individuals. 
As a result of these social interactions, the opinions of people involved in the interaction might change. 
The effect that social encounters and social relations has on the opinions of the involved agents is reffered to as social influence. Social influence has been proposed as the most important effect in shaping an individual’s opinions \cite{chacoma_opinion_2015}. 
In this paper, we will distinguish between positive and negative social influence. Positive social influence refers to interactions that result in more similarity between agents after interacting \cite{flache_models_2017,levin_dynamics_2021}. 
This can be thought of as reaching a compromise, finding common ground or seeing the other person’s perspective on a topic. Negative social influence refers to interactions that result in less similarity between agents after interacting \cite{flache_models_2017}. 
Examples include moral outrage, outgroup aversion or similar distancing effects. It is important to note that although positive influence seems to be a robust empirical finding, negative influence is more elusive \cite{flache_models_2017,takacs_is_2014,turner_paths_2018}. 
With that said, there is evidence that suggests that exposure to opposing views can lead to increased polarization \cite{bail_exposure_2018}.

\section{Opinion Dynamics}
The effects of homophily and social influence has been studied extensively with different types of formal models, primarily agent-based models \cite{flache_models_2017,flache_between_2018,noorazar_classical_2020}. These simplified systems are normally studied to identify which conditions can give rise to polarization or consensus in terms of the opinions of simulated agents \cite{flache_models_2017}. Previous models have largely only focused on how social influence affects a system over time, without considering how the social interactions change as a result of changes in opinions \cite{galesic_integrating_2021,holme_nonequilibrium_2006,jalili_coevolution_2015}. Central to most classical models of opinion dynamics is that agents are situated in static, theoretical networks \cite{flache_models_2017}. The assumption of static networks is not inconsequential. Social networks are inherently dynamic, with new ties being formed and deleted over time.  But as has already been established, empirical work suggests that these two processes are largely interdependent \cite{bener_empirical_2016,kossinets_origins_2009}. New social interactions are more likely between similar agents, and tie deletion is also more likely between dissimilar agents \cite{kossinets_origins_2009}. 
Although all models do some violence on the world by making assumptions, models should try to include the vital mechanisms of the system they are representing, while simplifying the system enough to understand it \cite{epstein1999agent,smaldino_models_2016}. Considering the empirical evidence \cite{bener_empirical_2016,crandall_feedback_2008,kossinets_origins_2009}, it is one of this paper’s central claims that coevolution should be considered a vital mechanism. In order to support this claim, we need to expand our understanding of the basic underlying mechanisms of social influence to also incorporate the underlying mechanisms of network formation. We therefore turn our attention to identifying empirically plausible micro-behaviors of network formation. 

\section{Network Formation}
In order to identify realistic mechanisms of network behavior, it is fruitful to first survey previously considered networks in opinion dynamics. 
Classic examples of the static, theoretical networks used in most models include ring lattices, small-world networks and scale-free networks \cite{barabasi_scale-free_2003,watts_collective_1998}. Both small-world and scale-free networks are famous for being able to capture essential features of real social networks. Namely, small-world networks are able to capture the general tendency of large average clustering coefficient and small average path length \cite{watts_collective_1998}. Famously, this is achieved by starting with a ring lattice and rewiring a small percentage of the ties randomly, which creates highways of information that decreases the average path length considerably \cite{watts_collective_1998}. On the other hand, scale-free networks can capture the general tendency of long tails in degree distributions of social networks. That is, the degree distribution of social networks often follows a power law, where a few nodes have an extreme amount of edges, while most nodes only have a few \cite{barabasi_scale-free_2003}. Recent work seems to call into question how universal power laws are in empirical social networks, and finds instead that most networks follow a lognormal distribution, and not a power law \cite{broido_scale-free_2019}. It is noteworthy that neither of the theoretical networks can capture the essential features of social networks simultaneously \cite{jackson_search_2004}. As these features are likely to be critical to the behavior of how the agents interact in such a network, we need more empirically plausible models of social network formation. 
\subsection{Triadic Closure}
An alternative to the preferential attachment of scale-free networks and the rewiring of small-world networks is to consider what mechanisms govern how real social networks change over time. Both scale-free and small world networks attempt to answer the question of how networks characteristics could be generated, not why social networks have the characteristics that they do \cite{jackson_search_2004}. An attempt at answering the why-question is the work by Jackson \& Rogers (2004), which emphasizes the role of triadic closure in network generation. Reliably, triadic closure is found to be the most important and robust mechanism for how new connections are made in social networks \cite{asikainen_cumulative_2020,bianconi_triadic_2014,kossinets_origins_2009,peixoto_disentangling_2022}. Triadic closure refers to generating new connections by selecting from “friends of friends”. Empirical studies on dynamical networks find that the probability of creating a new tie is a decreasing function of the distance in the network \cite{bener_empirical_2016,kossinets_origins_2009}. The less separated you are from someone, the more likely you are to form a social tie to this person. Specifically, the empirical study suggests that when you are removed one rather than two degrees of separation from someone, you are 30 times more likely to form a connection. This increase in likelihood only increases with distance. When you are 5 degrees of separation away, you are 2.500 times less like to form a connection than you would have been were you only removed by one degree of separation \cite{kossinets_origins_2009}. 

Using triadic closure as the generating principle for network formation has shown great promise in explaining some of the key characteristics of social networks. In formal models, this is implemented by making new connections predominantly by triadic closure while letting a small percent of new ties be formed at random \cite{ilany_social_2016,jackson_search_2004,jackson_meeting_2007}. These models can generate the important characteristic findings of high average clustering coefficient, low average path length and lognormal degree distributions \cite{jackson_search_2004,jackson_meeting_2007}. 
It is worthwhile to take time to understand why these measures are important and why these models generate the patterns that they do. Average clustering coefficient is a measure of connected local communities are in the network \cite{watts_collective_1998}. Models of triadic closure are likely to exhibit high average clustering coefficients as triadic closure will increase the number of local links. This is closely linked to the fact that social networks are often made of tight-knitted, well-connected local communities \cite{peixoto_disentangling_2022}. Average path length refers to average length of the shortest path between any node in the network. Here, the implemented formal models of triadic closure benefit from similar mechanisms of randomness as small-world networks to achieve low average path lengths \cite{jackson_meeting_2007,watts_collective_1998}. Having even a small amount of randomness can create long-range connections, that acts like shortcuts between nodes, decreasing the average path length substantially \cite{watts_networks_1999}. Path length is important for how fast information or contagious diseases can spread between individuals in a network. Finally, triadic closure will lead to lognormal or scale free degree distributions, as high degree nodes have more possibilities for being selected for tie generation simply because they have larger degrees \cite{jackson_meeting_2007}. The principle of triadic closure seems to not only characterize human social networks, but could be a robust organizing principle for many different social species \cite{ilany_social_2016}. 

\begin{figure}[H]
    \centering
    \includegraphics[width=.8\linewidth]{../plots/references/kossinets_watts.jpeg}
  \caption{Tie closure. Taken from \protect\citeauthor{kossinets_origins_2009} \protect\citeyear{kossinets_origins_2009}. Panels show different possible tie-closures. The first panel (A) depicts closing ties with a friend of a friend. This type of tie-closure is called triadic closure. Panel B and C shows longer cycles of closure.}
  \label{fig:tie_closure}
\end{figure}

\section{Co-evolution via tie-deletion}
Now that we have established the fundamental principles of opinion and network dynamics, we now turn to the mechanisms that could enable them to co-evolve. 
It is easy to see how opinions could be influenced by network dynamics. 
As the social network changes, the available interactions for each agent will change. 
As one of the primary forces of opinion dynamics is social influence, changes in the social network will have large effects on the opinions of the social agents of the network. 
This is one side of the coin. As the social network already influences opinion dynamics, we need to identify mechanisms that can change the ties of the social network based on the opinions of its agents. 
Any mechanism that changes the ties in the network based on the opinions of the agents will cause opinion and network dynamics to co-evolve. 
There are good reasons to believe that there are many effects that live up to this criteria, as we have seen with the effect of observed homophily. 
Similarity is a strong predictor of which pairs form new ties \cite{bener_empirical_2016,kossinets_origins_2009}.
In the same vein, dissimilarity also predicts the breaking of social ties \cite{bener_empirical_2016,kossinets_origins_2009,levin_dynamics_2021}. 
Although both mechanisms are at play in social networks, we will focus our efforts on tie-deletion of dissimilar ties. 
The reason for this choice is that there are already existing work focusing on the effects of tie-deletion in similar models \cite{santos_cooperation_2006,sasahara_social_2021}. 
This allows us to examine the robustness of the effect of tie-deletion on opinion dynamics. 
Understanding the previous findings concerning co-evolution and the effect of tie-deletion is critical for understanding this paper. Because of this, we turn to presenting the main findings from the previous literature. 

\subsection{Tie-deletions effect on cooperation}
In addition to the empirical work investigating the interplay between social networks and the opinions of their constituents, theoretical work also points to the primacy of the co-evolution of networks \cite{holme_nonequilibrium_2006}. 
These studies come specifically from another field than opinion dynamics interest in identifying the mechanisms that facilitate cooperation. The field I am refering to is the field of computational biology. In many ways, this field should be considered an adjacent field to opinion dynamics, as they share much in their interests and in their methods. The literature from computational biology suggests that co-evolution can play a vital role in facilitating cooperation \cite{dakin_dynamic_2018,melamed_strong_2016,pepper_mechanism_2002,santos_cooperation_2006}. 
Intuitively, one might expect that when connectivity increases in such a network, cooperation increases as well. However, the opposite effect is observed. In their paper, Santos et al. (2006) considers agents playing game-theoretic games, where agents either cooperate or defect. 
In relation to the mechanism of tie-deletion, Santos et al. (2006) proposes a way for agents to adjust their ties based on interactions made with other agents. When cooperators interact with defectors, the social tie between cooperators and defectors has a chance of being rewired to a different agent. This keeps the number of edges constant, but decreases connectivity \cite{santos_cooperation_2006}. Their results indicate that as the propensity for deleting ties between cooperators and defectors increases, cooperation flourishes. The more likely tie-deletion is, the more cooperation evolves in the system. The reason given for this result is that removing ties between cooperators and defectors increases positive assortment between cooperators and decreases positive assortment between defectors and cooperators. One of the striking attributes of this finding is that without any propensity for tie-removal, cooperation does not evolve for conditions equivalent to the Prisoner’s Dilemma \cite{santos_cooperation_2006}. More generally, positive assortment has been found to be a robust facilitator of cooperation in computational biology \cite{boyd_coordinated_2010,dakin_dynamic_2018,melamed_strong_2016,pepper_mechanism_2002}. The results also indicate that even relatively simple topological network dynamics that reflect the individual agent’s reaction to their social interactions can produce realistic networks \cite{santos_cooperation_2006}. 

\begin{figure}[H]
    \centering
    \includegraphics[width=.5\linewidth]{../plots/references/santos.png}
  \caption{Tie-deletions facilitates cooperation. Taken from \protect\citeauthor{santos_cooperation_2006} \protect\citeyear{santos_cooperation_2006}. Panels show simulations of different values of $W$. In this model, $W$ controls the propensity to delete ties between defectors and cooperators. Y-axis shows the disadvantage of being cheated, x-axis shows the pay-off of cheating. Letters on the panel represent well-known game theoretic dilemmas (Prisoners Dilemma, Stag Hunt and Snow Drift Game). Colors show the final fraction of cooperators after simulations are completed. When $W = 4.0$, cooperation effectively wipes out defectors completely. }
  \label{fig:santos}
\end{figure}

Although positive assortments effect on cooperation seems general in the computational biology literature, the opinion dynamics literature points to an opposite result. When combined with social influence, they report that tie deletion can lead to echo chambers, that stifle cooperation \cite{sasahara_social_2021}. This is more in line with a more intuitive explanation, where a decrease in the communication between agents leads to a decrease in cooperation. Obviously, computational biology and opinion dynamics are not same field, but it is still noticeable that the same underlying mechanism gives rise to effects of opposite directions on a networks ability to cooperate. Both studies are interested in how the dynamics of the network influences how well agents cooperate in the network, and they both find that tie-deletion is critical to developing cooperation \cite{santos_cooperation_2006,sasahara_social_2021}. It is precisely because of this dispute that this paper is especially interested in how the deletion of negative ties can impact cooperation. Like the work of Santos et al. (2006), the probability of deleting negative ties will therefore be a key aspect of our model.  

REMEMBER THIS ARTICLE - SUPER RELEVANT: \cite{geschke2019triple}

\begin{figure}[H]
    \centering
    \includegraphics[width=.8\linewidth]{../plots/references/echo_chambers.png}
  \caption{Tie-deletion accelerates echo chambers. Taken from \protect\citeauthor{sasahara_social_2021} \protect\citeyear{sasahara_social_2021}. First row shows the opinions for the simulation, second row shows the network after simulation. Columns show simulations of only including social influence, only including rewiring based on opinions or both respectively. Of special interest is the last panel, which shows that rewiring can accelerate echo chamber formation, as the opinions stabilize faster than when only social influence is included.}
  \label{fig:echo_chambers}
\end{figure}

\section{Model Description}
\subsection{Conceptual overview}
The model consists of agents situated in an undirected network. Nodes on the network represent social agents. Edges represent social ties to other agents. 
The model simulates social interactions between the agents without agents having any strategy or task. 

\subsection{Assumptions}
It is assumed that the opinion of an agent is shaped only by her initial opinion and the influence of her peers. 
The model assumes that agents will compromise their opinion when interacting with agents with similar opinions. 
When agents interact with agents dissimilar from them, the model assumes that agents will either not change their opinion or they will become more opposed by the interactions.
Furthermore, it is assumed that connections between agents are not static but dynamic in nature. 
Specifically, the model assumes that agents will find new connections primarily through their already existing connections via triadic closure. Finally, it is assumed that agents will tend to relinguish ties to agents too dissimilar from themselves.
All these assumptions can vary in the strength of the proposed effect. For instance, similar agents could reach a perfect compromise or only convince each other slightly. 
As the results of the model critically hinges on the strength of these assumptions, I introduce model parameters that control the strength of these mechanisms.


\subsection{Components and their properties}
The model is specified by five different parameters. 
The first three parameters are the opinion dynamics parameters. They describe how interactions change opinions ($\alpha$, $\beta$, $T$). 
The fourth parameter is the network dynamics parameter. It specifies how the probability of generating random ties rather than ties via triadic closure ($R$).
The fifth parameter is the co-evolutionary parameter. It specifies the probability of dissoluting negative ties ($P(D)$).
The specifics of how they influence the model is specified in "Dynamics".  

In order for the model to be computationally feasible, only a subset of the possible values of each parameter of the model is considered. All different possible combinations of each parameters are considered, resulting in 3780 different parameter combinations. The considered parameter values are:


\begin{align*}
    \alpha \in & \{0.05, 0.10, 0.15, 0.20, 0.25\} \\
    \beta \in & \{0.00, 0.05, 0.10, 0.15, 0.20, 0.25\}\\
    T \in & \{06, 0.7, 0.8, 0.9, 1.0, 1.1, 1.2\}\\
    R \in & \{0.1, 0.3, 0.5\} \\
    P(D) \in & \{0.0, 0.2, 0.4, 0.6, 0.8, 1.0\}\\
\end{align*}

Some justification of the different parameters are in order. 
First, it is fair to assume that $\alpha$ and $\beta$ are powerful because social interactions are so frequent, but not because of the strength of social interactions themselves.
One rarely reaches a perfect compromise when debating other people, which is what $\alpha = 1$ would be. It therefore makes sense to assume that realistic values $\alpha$ will be fairly low. 
The same argument applies to $\beta$. Negative social influence is as mentioned less empirically validated than positive social influence \cite{takacs_is_2014}. We therefore also include the possibility of simulations with $\beta = 0$. 
$T$ was chosen as these parameters gave the most interesting results. For $T > 1.2$, the model more or less always converges to consensus no matter what. In the same vein, only very few simulations avoid polarization for $T < 0.6$. The interesting parameters for this paper's interest are in between these two parameters. 
For values of randomness, we have good reason to believe that most interactions are made via triadic closure and are not random \cite{kossinets_origins_2009}. It is therefore fair to assume that randomness will at most be half ($R = 0.5$).
Finally, we want to study the whole range of the co-evolutionary force of $P(D)$, the probability of tie-deletion. We therefore consider values where the network doesn't co-evolve at all ($P(D) = 0$), to values where the network perfectly evolves with opinions ($P(D) = 1$).


\subsection{Initialization}
A random Watts-Strogatz small-world graph is created 
with $N=500$, $k=7$, and $p=0.5$ \cite{watts_collective_1998}. For each node in the network,
an agent is initialized with a value ($O_i$) which is taken to represent the opinion of the agent. The opinion is modelled as a continous number between -1 and 1. 
The idea is to represent that opinions can be anywhere inbetween extremely pro and extremely against a proposition.
To initialize the model, we start of with a diverse set of opinions. All values of $O_i$ are initialized by drawing from a uniform distribution between -1 and 1: 
$$O_i \sim U(-1, 1)$$

\subsection{Dynamics}

\subsubsection{Sampling agents and interactions}

The model is an attempt at representing social encounters and their change over time. 
To represent this idea, agents interact with each other over a certain amount of time-steps. 
During such a time-step, an agent will always create a new connection. 
At every timestep ($t$) a random agent ($A_t$) is sampled from the network ($N_t$). This agent creates a new edge to another agent in the network. 
As the dynamics also allows for tie-deletion, I control for the number of edges in the network.
To keep the number of edges in the network approximately constant, edges are either created or rewired to account for deleted edges. 
To do this, let $E_1$ be the number of edges of $N_1$ and let $E_t$ be the number of edges of $N_t$. 
If $E_t < E_1$, $A_t$ will not rewire one of its existing edges, but instead create a new edge. If $E_t \geq E_1$, $A_t$ will rewire one of its existing connections to the new agents.
With a probability of $R$, $A_t$ connects to a random agent, that $A_t$ is not currently connected to. 
With a probability of $1-R$, $A_t$ connects to one of its edge's edges. Regardless of whether the connection was sampled randomly or through an edge's edges, let $C_t$ define the newly connected agent.

In order to calculate the average path length of the network, the model is restricted to being only one component. 
Simply put, having only one component guarantees that there exists a path between any two nodes of the network.
To ensure this property, we check the degree of $A_t$ and $C_t$. If the degree of either $A_t$ or $C_t$ is 0, a new edge is created randomly to a new node from $N_t$.
If both $A_t$ and $C_t$ have degrees larger than 0, and the network has more than one component, a new edge is created to restore the network. Specifically, we restore the edge that $A_t$ rewired to $C_t$, while keeping the edge from $A_t$ to $C_t$.
I will refer to the process of ensuring only one connected component simply as component ensurance. 

\subsubsection{Interaction between neighbors}
After finding a new connection, the agents interact with each other. This is meant to represent 
discussion or other social interactions between agents. 
Social interactions between similar individuals will lead to compromise between their initial opinion and their opinion after the encounter.
As a consequence, the more you disagree with a person, the more mallable your opinion is. If you reach a compromise with a person with a very different opinion than yours,
you will change your opinion more dramatically than if you reached a compromise with someone that you almost agree with. 
To model this kind of behavior, the randomly sampled agent, $A_t$, interacts with all its connected agents and changes its opinions according to the opinion of the connected agents.
This is done by iteratively interacting with every edge of $A_t$. Let $B$ denote an edge of $A_t$. Let $O(\cdot)$ define a function with agents as inputs and their opinions as outputs.
The interaction between two different agents is determined by a threshold value, $T$. 

When $T \geq \abs{O(A_t) - O(B)}$, the interaction will pull the opinions of the two agents closer to each other. The force with which they are pulled is defined as a fraction of their distance from each other:
$$V_p = \big(\abs{O(A_t) - O(B)}\big) \cdot \frac{\alpha}{2}$$

Let $O_{max} = \max(O(A_t), O(B))$ and $O_{min} = \min(O(A_t), O(B))$ and update the values of opinions by:

$$O'_{max} = O_{max} - V_p$$
$$O'_{min} = O_{min} + V_p$$

where $O'_{max}$ and $O'_{min}$ are the respective updated values of $O_{max}$ and $O_{min}$ after interacting with each other. When $T < \abs{O(A_t) - O(B)}$, the interaction will push the opinions of the two agents further apart by a similar principle as illustrated above: 

$$V_n = \big(\abs{O(A_t) - O(B)}\big) \cdot \frac{\beta}{2}$$

Using the same definitions as above, we update the opinions of each agent:

$$O'_{max} = O_{max} + V_n$$
$$O'_{min} = O_{min} - V_n$$

This process concludes when $A_t$ has updated her values for all her edges.

\subsubsection{Tie-dissolution}
After interacting with her connected agents, $A_t$ might delete the connection to some of these agents based on their similarity.
In this model, social interactions can result in opinions becoming more distant than they were initially. 
This can be because what the agents are discussing is divisive or controversial. When this happens, connections can be severed.
I call this process tie-dissolution. 
If $T < \abs{O(A_t) - O(B)}$, there is a chance that their tie is dissoluted after interacting. This probability of dissolution between dissimilar agents in the model is described by the parameter $D$.
When $D = 1$, all dissimilar ties are severed. When $D = 0.5$, there is 50\% chance that dissimilar ties will be deleted. 
After ties are dissoluted, the process of component ensurance is performed where $C_t$ is replaced with $B$.
When all edges of $A_t$ have been evaluated, the time-step concludes. This process is repeated for 10.000 time-steps.

\subsection{Outcome metrics} 

\subsubsection{Time-dependent Metrics}
Every 20th time-step, the current state of the network is recorded. 
To track the polarization of opinions over time,
the mean and standard deviation of the absolute value of opinions are recorded.
To track the similarity of an agent's opinion to the opinion of their neighors, the average distance to all edges are recorded.
To evaluate the effect of tie-dissolution, the cumulative frequency of tie-dissolutions are recorded.
For characterizing the network, I record the average clustering coefficient, average path length and degree assortativity coefficient.

\subsubsection{Final State Metrics}
After 10.000 time-steps, the network reaches its final state and its characteristics are recorded. 
For every agent in the network, I record: 
\begin{itemize}
    \item The initial opinion of the agent
    \item The opinion of the agent at the final state of the network
    \item The mean distance to all neighbors' opinions
    \item The degree of the agent 
    \item The betweeness centrality of the agent 
    \item The clustering coefficient of the agent 
\end{itemize}

The measures related to the opinion of agents can then be correlated with clustering, centrality and degrees to see how changes in network topology relate to changes in opinions. 

\begin{figure}[H]
    \centering
    \includegraphics[width=.8\linewidth]{../plots/schematics/model_representation.png}
  \caption{Flowchart of a single timestep. Numbers indicate different parts of the process of a single time-step. Blue bubbles show what model parameters are relevant to the particular step in the process. A random agent, $A_t$ is sampled from the network. Next, the network dynamic process begins (1). With a probability of $R$, a new connection is made to made to another randomly sampled agent. With a probability of $1-R$, a new connection is made via triadic closure. Then the opinion dynamic stage begins (2). $A_t$ pushes and pulls iteratively on all the opinions of her neighboring agents. Whether opinions are pushed or pulled is determined by whether the distance between them is further than $T$ apart. How much they are pulled or pushed is determined by $\alpha$ and $\beta$ respectively. After this process, the co-evolutionary step begins (3). With a probability of $P(D)$, ties to agents with opinions further than $T$ apart from $A_t$'s opinion are deleted. This concludes one time-step of the model.}
  \label{fig:flowchart}
\end{figure}

\begin{algorithm}
    \caption{Calculate $y = x^n$}
    \begin{algorithmic} 
    \REQUIRE $n \geq 0 \vee x \neq 0$
    \ENSURE $y = x^n$
    \STATE $y \leftarrow 1$
    \IF{$n < 0$}
    \STATE $X \leftarrow 1 / x$
    \STATE $N \leftarrow -n$
    \ELSE
    \STATE $X \leftarrow x$
    \STATE $N \leftarrow n$
    \ENDIF
    \WHILE{$N \neq 0$}
    \IF{$N$ is even}
    \STATE $X \leftarrow X \times X$
    \STATE $N \leftarrow N / 2$
    \ELSE[$N$ is odd]
    \STATE $y \leftarrow y \times X$
    \STATE $N \leftarrow N - 1$
    \ENDIF
    \ENDWHILE
    \end{algorithmic}
    \end{algorithm}

\section{Model Evaluation}

\subsection{Fitting the model}
As previously mentioned, previous models have often not integrated empirical data of social networks sufficiently to test the validity of their models (Flache et al., 2017). What is meant by this critique? Arguably, the most pressing issue is that models rarely consider how the results of their computational models compare with the real world. This is largely a product of the types of agent-based models typical in opinion dynamics as well as the phenomena of opinion dynamics themselves. Most models of opinion dynamics are low-dimensional (Bener et al., 2016), in that they don’t seek to explain exhaustively how opinions are formed, but rather to point out interesting interactions between key variables of the process. This makes empirical validation especially tricky for these models. Compounding to this problem is that the time-scales considered by these models are massive, and that kind of data is very hard to come by. And even if they were available to us, opinions are very hard to measure. Any self-reported measure is going to be subject to the usual problems of the unreliability of self-reports. Using political voting patterns might be a usable proxy for polarization, but these data are very hard to come by. 
This does not however mean that incorporation of empirical data is impossible. Because the model considered in this paper is coevolutionary, it allows us to investigate how the generated networks compare to real empirical social networks. By borrowing methodology from computer science, we will treat this as a machine learning problem, and investigating the goodness of fit using hyperparameter optimization (Akiba et al., 2019; Bergstra et al., 2011). What we really want to know is to what degree the model can explain the patterns observed in real world social networks. To do this, we want to estimate the model parameters by generating networks from the model, and then see how much these generated networks resemble real networks. I will refer to the process of finding these parameter values as agent-based model fitting, as it is analogous to estimation of parameter values in statistics. Beyond knowing whether the model can generate the observed structure of real-world networks, this paper is specifically interested in how critical co-evolution is to the explanatory power of these models. Ideally, we want to compare models which include co-evolution to models without co-evolution and investigate whether co-evolutionary models are better explanations than their network formation counterparts. I will refer to this process as agent-based model comparison, which is again reasoned by its analogy to model comparison in statistics. 
Although these steps are analogous to model fitting and model comparison, there are important differences that are worth mentioning. Especially important is that model comparison normally penalizes the inclusion of additional parameters in the model (Vrieze, 2012). In other words, simple explanations are preferred when the performance is comparable (Emiliano et al., 2014; Vrieze, 2012). The primary reason for this is that including additional parameters allows the model to overfit to the data. In classical regression models, models with additional parameters will always give a better fit, as the scalar for the new parameter can simply be set very close to zero. In this case, the model becomes mathematically identical to the simpler explanation. Although we don’t have a formal way of calculating agent-based equivalents to Akaike Information Criteria or Bayesian Information Criteria to determine which model is the better explanation (Vrieze, 2012), we can try to avoid situations of mathematical identity and overfitting. This is done by framing the problem of agent-based model fitting as a hyper parameter optimization problem. 


\subsection{Data}
To fit the model to data, we consider 6 empirical social networks; a network of representing social networks of Dolphins (Lusseau, 2003), the Karate Club Network (Zachary, 1977), a citation network (Newman, 2006), co-purchase network of political books on Amazon (Shi et al., 2017), political blogs (Adamic \& Glance, 2005) and network of politicians based on shared likes on Facebook (Rozemberczki et al., 2018). For all networks, only the main component of the network was considered. This was done as average path length is not well-defined for unconnected graphs. As the model assumes undirected networks, the network of political blogs was transformed from a directed to an undirected network. This was done by making any directed link between two agents be undirected. 

\subsection{Hyperparameter Optimization}
To evaluate how closely the generated networks resemble the real networks, we must first define a distance metric between networks. Although many features are important for characterizing a network, we will follow previous suggestions that identify the average path length, the average clustering coefficient and the degree distribution as the most defining aspects of a network (Jackson \& Rogers, 2004, 2007). We therefore seek to minimize the mean difference on these parameters between the generated and the real networks. 
Before we can simply calculate the mean of difference, there are some specifics that needs to be clarified. These primarily concern the average path length and how to operationalize the difference in degree distributions. 
To identify the distance of degree distributions of networks, we calculate the Jensen Shannon Divergence between the two distributions. The Jensen Shannon Divergence is a distance metric between probability distributions \cite{fuglede_jensen-shannon_2004}. 
In terms of the average path length, there is a problem of computational costs. Calculating the average path length can be very expensive computationally, especially for large networks (Matsumura et al., 2018). Instead of calculating the actual average path length, we approximate it by taking 1000 samples of random pairs of nodes and calculating the average path length of those 1000 nodes. Although this is still only an estimation of the actual average path length, this method generally approximates the average path length fairly well (Matsumura et al., 2018).
Both the correlation coefficient and the Jensen Shannon Divergence are values between 0 and 1. Average path length on the other hand is not restricted in the same way. If it is not normalized, it will therefore be weighted much higher than the correlation coefficient and the Jensen Shannon Divergence in the distance metric. We therefore normalize the average path length by

$$APL* = \frac{\abs{APL(G) - APL(A)}}{APL(A)+2}$$

where $APL*$ is the normalized average path length, $APL(G)$ is the approximated average path length of the generated network and $APL(A)$ is the apprioximated average path length for the actual network. Adding two to the denominator is somewhat arbitrary. The choice was made to be more certain that $APL*$ would still be below 1.
With this in place, the final distance metric considered between the actual network, $A$ and the generated network $G$ is 

$$ O(A, G) = \frac{1}{3} \cdot \left(JSD(D(A), D(G)) + \abs{C(A) - C(G)} + APL*\right)$$

where $O(A, G)$ is the distance between distance between the two networks, $JSD$ is the Jensen Shannon Divergence, $D(A)$ is the degree distribution of $A$, $D(G)$ is the degree distibution of $G$, $C(A)$ is the average clustering coefficient of $A$ and $C(G)$ is the average clustering coefficient of $G$. This distance metric is just the average difference on the considered network characteristics between $A$ and $G$. This is also why the sum of the difference is multiplied by $\frac{1}{3}$. This distance metric between networks, $O(A, G)$ will serve as the objective function that we want to minimize. The hyperparameter optimization algorithm search the parameter space for the combination of parameters that results in the lowest values of $O(A, G)$ \cite{akiba_optuna_2019,wu_hyperparameter_2019}.

All models were fit by first calculating the ratio between edges, $E$, and vertices, $V$, and calculating $K = \nint{(2 \cdot \frac{E}{V})}$. The value $K$ is then used as the $K$-parameter in the initially generated small world network to ensure that the generated network has approximately the same number of edges per vertex as the target network. 
For both models, we let randomness be a free parameter between 0 and 1. For the co-evolutionary model, we restrict the threshold to be between 0.1 and 1.3. The lower limit is chosen as values of threshold close to 0 results in agents that don’t agree with anyone else but themselves. The upper limit was chosen to ensure that the behavior of the model differs significantly from the model without opinion dynamics. 
The values of positive learning rate are restricted to be between 0.05 and 0.5. This is justified by values close to 0 being akin to no positive social influence and values above 0.5 assumes social influence to be an unrealistically powerful force. Similarly, we let the negative learning rate be restricted to be between 0 and 0.5. Here, we allow values close to 0 to reflect that negative social influence is still a less established fact. Finally, we force the model to exhibit co-evolution by restricting the probability of tie-deletion to be between 0.1 and 1. 

Fitting the model to the different networks estimates the best combination of parameters for each given network. These parameters are then used to simulate 10 different networks using different random seeds but the same parameter values. This is done as the model is largely stochastic. Having 10 simulations of the same parameters gives a more robust estimate of how closely the model can recreate the patterns from the empirical networks.
After finding the best parameter values, the importance of each parameter value and each network is calculated using a fANOVA \cite{hutter2014efficient}. 

\subsection{Results}

The results indicate that the network formation algorithm of triadic closure can explain many of the considered characteristics of social networks. The model without opinion dynamics performs well on most networks and is on par with the model with opinion dynamics. It even performs better than the model with opinion dynamics in the Karate Club network. On the political networks investigated here, the model with opinion dynamics performs much better.
Parameter importance shows that the randomness parameter was the most important parameter for all networks except for the network of politicians and political blogs.  In these networks, the most important parameter is instead the threshold. 

\begin{figure}[H]
    \centering
    \includegraphics[width=.8\linewidth]{../plots/overall/Model_Evaluation_Average_Clustering.png}
  \caption{Difference between models and target regarding average clustering coefficient. X-axis shows the average correlation coefficient of the different networks. Y-axis shows the different empirical networks considered. Colors shows the different models as well as the target value. Black lines indicate 95\% confidence intervals.}
  \label{fig:eval_clustering}
\end{figure}

\begin{figure}[H]
    \centering
    \includegraphics[width=.8\linewidth]{../plots/overall/Model_Evaluation_APL.png}
  \caption{Difference between models and target regarding average path length. X-axis shows the estimated average path length of the different networks. Y-axis shows the different empirical networks considered. Colors shows the different models as well as the target value. Black lines indicate 95\% confidence intervals.}
  \label{fig:eval_path}
\end{figure}

\begin{figure}[H]
    \centering
    \includegraphics[width=.8\linewidth]{../plots/overall/Model_Evaluation_JSD.png}
  \caption{Difference between models and target regarding Jensen Shannon Divergence. X-axis shows the Jensen Shannon Divergence of the degree distribution between the generated and the target network. Notice that as Jensen Shannon Divergence is a distance metric, lower values indicate less difference in degree distributions. Y-axis shows the different empirical networks considered. Colors shows the different models. Black lines indicate 95\% confidence intervals.}
  \label{fig:eval_divergence}
\end{figure}

\begin{figure}[H]
    \centering
    \includegraphics[width=.8\linewidth]{../plots/overall/Model_Evaluation.png}
  \caption{Difference in model performance. X-axis shows the mean difference between the generated network and actual networks, ($O(A, G)$). Y-axis shows the different empirical networks considered. Colors indicate whether the model includes or excludes opinion dynamics. Black lines indicate 95\% confidence intervals.}
  \label{fig:eval_mean}
\end{figure}

\begin{figure}[H]
    \centering
    \includegraphics[width=.8\linewidth]{../plots/overall/Parameter_Importance.png}
  \caption{Hyper Parameter Importance. X-axis shows different hyperparameters. Y-axis shows parameter importance. Colors indicate different networks. Parameter importance is calculated using an fANOVA \protect\cite{hutter2014efficient}.}
  \label{fig:eval_importance}
\end{figure}


\begin{table}[H]
\begin{center}
    
\begin{tabular}{ |p{3cm}||p{2cm}|p{2cm}|p{2cm}|p{2cm}|p{2cm}|}
    \hline
    \multicolumn{6}{|c|}{Table of best parameter values} \\
    \hline
    \bf{Network} & $R$ & $T$ & $\alpha$ & $\beta$ & $P(D)$\\
    \hline
    Dolphins   & 0.003    &0.531&   0.202&   0.095&   0.111\\
    Karate Club&   0.870  & 0.137   &0.282&   0.090&   0.911\\
    Citation Network   &0.060 & 0.655&  0.389&   0.493&   0.150\\
    TV Show & 0.038 & 0.157 & 0.349 & 0.093 & 0.751 \\
    Political Books &0.004 & 0.222&  0.075&   0.144&   0.508\\
    Politicians&   0.014  & 0.101 &0.050&   0.014&   0.229\\
    Political Blogs & 0.109  & 0.100   &0.246&   0.007&   0.249\\
    \hline
\end{tabular}
\end{center}
\caption{Table of best parameter values}
\label{table:best_params}
\end{table}

\begin{table}[H]
    \begin{center}
        
    \begin{tabular}{ |p{3cm}||p{1.5cm}|p{1.5cm}|p{1.5cm}|p{1.5cm}|p{1.5cm}|p{1.5cm}|}
        \hline
        \multicolumn{7}{|c|}{Table of network characteristics} \\
        \hline
        \bf{Network} & $N$ & $E$ & $D_{\mu}$ & $D_{\sigma}$ & $C$ & $L_G$\\
        \hline
        Dolphins   & 62    &159&   5.129&   2.932 &   0.259 & 3.257\\
        Karate Club &34	&78	&4.588&	3.820&	0.571&	2.326\\
        Citation Network & 379 &	914	& 4.823	& 3.927 & 0.741 & 6.052 \\
        TV Shows & 3892 & 17262&8.871 & 12.557 & 0.374&6.324\\
        Political Books &105 &	441	& 8.400 &	5.449 &	0.488 &	3.015\\
        Politicians&  5908 &41729 & 14.126 & 20.096 &	0.385 & 4.628\\
        Political Blogs &	1222 & 16717 & 27.360 & 38.402 & 0.320 & 2.737\\
        \hline
    \end{tabular}
    \end{center}
    \caption{Table of network characteristics. $N$ is the number of nodes, $E$ is the number of edges, $D_{\mu}$ is the mean degree, $D_{\sigma}$ is the standard deviation of the degree distribution, $C$ is the average clustering coefficient, and $L_G$ is the average path length. }
    \label{table:characteristics}
    \end{table}

\subsection{Why is co-evolution a better explanation?}

Of particular interest is the political networks, as these networks are likely to be highly opinionated. As the model performance shows, these are also the networks where the difference in performance between the network formation and the co-evolutionary model become most stark. Most notably, the difference in performance for the network of politicians and of political blogs is drastic. It is therefore worthwhile to consider why the co-evolutionary model fits these types of networks so much better than the network formation model.
One of the primary reasons for why the co-evolutionary model performs so much better on political social networks is that it enables the network to have multiple central hubs. By letting the threshold, B, be relatively low, the network balkanizes into different communities, exhibiting connected caveman properties (Watts, 1999). This is also in line with the fact that these two networks are the only networks considered, where threshold is the most important parameter. This suggests that the political networks are organized by clearly delineated communities. The balkanization obviously affects all the considered network characteristics considerably. Having low values of thresholds makes for networks with a much larger average path length than if all nodes were in one cluster.  As the communities become smaller in size, this affects the degree distribution as well. When the network is no longer organized around one central cluster, the resulting degree distribution will exhibit a shorter tail, as agents cannot connect to a large portion of the agents in the network. When a network is characterized by larger average path length and shorter tail degree distributions, the co-evolutionary model can outperform the model without opinion dynamics. Because of the co-evolutionary model’s ability to create multiple hubs, it can capture these phenomena well. In contrast, the network formation model only has one parameter, R. It has no way of reliably creating multiple clusters in the network, and therefore it fails when it encounters networks with clearly separated communities. The network formation model has to balance average path length and high clustering coefficient, as it can only vary how random new connections are, similar to small world networks (Watts \& Strogatz, 1998). The co-evolutionary model can change the size of different clusters by adjusting the confidence boundary and the tie-deletion parameter. 
This explanation seems to be in line with the importance of the different parameters for the model fit. A congruent point comes from considered the best parameters for the different political social networks. Most of them are characterized by very low confidence boundaries, very low amount of randomness, very low negative learning rate and moderate values for tie-deletion. As we’ve established, low confidence boundaries reflect that the political scene consists of different groups, that are locally very well connected, but doesn’t have much to do with each other. To achieve the high average clustering coefficients, the randomness must be low. For the network to not just become two clusters, negative learning rate must be low, so that opinions do not cluster around 1 and -1. Finally, to ensure that there is still some global connectivity between the different clusters, tie deletion is not high enough to limit the network to only have one or two informational highways. 

In conclusion, the agent-based model fitting and model comparison suggests two important notions. The first notion is that triadic closure alone seems to be able to generate many of the characteristic patterns of social network. This echoes previous findings concluding the same (Ilany \& Akçay, 2016; Jackson \& Rogers, 2004, 2007). The second notion is that when opinions are central to the social networks, including opinion dynamics makes for a markedly better model of why social networks are like they are. 
This second notion points to the fact that the effects of network and opinion dynamics are largely interdependent. We have seen that opinion dynamics can drastically alter the dynamics of networks. We now turn to the other side of this interplay by considering how network dynamics can change opinions.

\section{Results}

\subsection{Alpha, beta, threshold, tie-deletion and chaotic systems}

\begin{figure}[H]
    \centering
    \includegraphics[width=.8\linewidth]{../plots/overall/Absolute_Opinion_Threshold.png}
  \caption{$T$'s effect on polarization over time. X-axis shows the time-step and the y-axis shows the absolute value of the opinions of agents. Colors indicate different values of $T$. Lines indicate the mean value of each time-step, aggregated over all parameters excluding $T$. Shaded regions are the 95\% confidence intervals.}
  \label{fig:threshold}
\end{figure}

\begin{figure}[H]
    \centering
    \includegraphics[width=.8\linewidth]{../plots/overall/Absolute_Opinion_Positive_Learning_Rate.png}
  \caption{$\alpha$'s effect on polarization over time. X-axis shows the time-step and the y-axis shows the absolute value of the opinions of agents. Colors indicate different values of $\alpha$. Lines indicate the mean value of each time-step, aggregated over all parameters excluding $\alpha$. Shaded regions are the 95\% confidence intervals.}
  \label{fig:alpha}
\end{figure}

\begin{figure}[H]
    \centering
    \includegraphics[width=.8\linewidth]{../plots/overall/Absolute_Opinion_Negative_Learning_Rate.png}
  \caption{$\beta$'s effect on polarization over time. X-axis shows the time-step and the y-axis shows the absolute value of the opinions of agents. Colors indicate different values of $\beta$. Lines indicate the mean value of each time-step, aggregated over all parameters excluding $\beta$. Shaded regions are the 95\% confidence intervals.}
  \label{fig:beta}
\end{figure}

\begin{figure}[H]
    \centering
    \includegraphics[width=.8\linewidth]{../plots/overall/Absolute_Opinion_Tie_Dissolution.png}
  \caption{$P(D)$'s effect of polarization over time. X-axis shows the time-step and the y-axis shows the absolute value of the opinions of agents. Colors indicate different probabilities of tie-deletion of dissimilar agents. Lines indicate the mean value of each time-step, aggregated over all parameters excluding the probability of tie-deletion and randomness. Shaded regions are the 95\% confidence intervals. The three different plots show the different values of probability of new connections to be generated randomly. }
  \label{fig:pd}
\end{figure}

\begin{figure}[H]
    \centering
    \includegraphics[width=.8\linewidth]{../plots/overall/Negative_Tie_Deleted.png}
  \caption{Negative ties deleted. X-axis shows the time-step and the y-axis show the average cumulative frequency of deleted ties. Colors indicate different probabilities of tie-deletion of dissimilar agents. Lines indicate the mean value of each time-step, aggregated over all parameters excluding the probability of tie-deletion and randomness. Shaded regions are the 95\% confidence intervals. The three different plots show the different values of probability of new connections to be generated randomly. Notice that when $P(D) = 0$, no ties are deleted.}
  \label{fig:ntd}
\end{figure}

\begin{figure}[H]
    \centering
    \includegraphics[width=.8\linewidth]{../plots/overall/Absolute_Opinion_Tie_Deletion_Without_Negative.png}
  \caption{The effect of $P(D)$ without negative learning. X-axis shows the time-step and the y-axis shows the absolute value of the opinions of agents. Colors indicate different probabilities of tie-deletion of dissimilar agents. Lines indicate the mean value of each time-step, aggregated over all parameters with $\beta = 0$, excluding the probability of tie-deletion. Shaded regions are the 95\% confidence intervals.}
  \label{fig:pd_no_negative}
\end{figure}

\begin{figure}[H]
    \centering
    \includegraphics[width=.8\linewidth]{../plots/overall/Radicalization.png}
  \caption{Distribution of opinion changes across different conditions. Rows display different values of thresholds, columns indicate different values of negative influence. Different colors show different values of probability of tie-deletion. X-axis shows the difference between the absolute value of the final and initial opinions of agents. This measure can be thought of as a measure of “radicalization”. Higher values indicate that the final value of agents is more extreme than the initial values, and vice versa. Y-axis exhibit the percent of values within each bin. }
  \label{fig:radicalization}
\end{figure}

Higher values of the threshold decrease polarization (see Figure ~\ref{fig:threshold}). Higher values of alpha decreases polarization (see Figure ~\ref{fig:alpha}). Higher values of beta increases polarization(see Figure ~\ref{fig:beta}). Notably, when beta is zero, almost all simulations reach consensus, regardless of all other parameters (see Figure ~\ref{fig:radicalization}). Similarly, the is no effect of negative tie-deletion when $\beta = 0$ (see Figure ~\ref{fig:pd_no_negative}). 
The drivers of polarization is low values of $T$ and high values of $\beta$. When $T$ is sufficiently small and $\beta$ is sufficiently large, all agents will have more extreme opinions at the end of the simulations than they had in the beginning. With intermediate values of $\beta$ and $T$, whether the opinions of a simulation becomes polarized or not is largely dictated by $P(D)$ (see Figure ~\ref{fig:radicalization}). 
The results indicate that higher values of $P(D)$ results in lower values of $|O|$ on average. 
The strength of the effect is modulated by how random new connections are made in the network. 
When randomness is higher, the effect of cooperation facilitation by high tie-deletion is diminished (see Figure ~\ref{fig:pd}). 
When $P(D) = 0$ and $\beta > 0$, the network almost always polarizes (see Figure ~\ref{fig:radicalization})(WHICH PROVES THE POINT OF CO-EVOLUTION?).
The effect of how random new ties are, is also critical for how many negative ties are deleted. 
The more random new ties are, the more ties will be deleted on average. Of course, the probability of negative tie-deletion, $P(D)$, also has a large impact on the number of deleted ties. 
Interestingly, higher probabilities of tie-deletion almost always result in a lower frequency of deleted ties over time (see Figure ~\ref{fig:ntd}).

\subsection{Correlations}

\begin{figure}[H]
    \centering
    \includegraphics[width=.8\linewidth]{../plots/overall/Correlation_Initial_Opinions.png}
  \caption{Correlations between initial opinions and final opinions. X-axis shows different values of threshold and the y-axis shows the Pearson Correlation Coefficient between the initial and final opinion of agents. Boxes indicate the quartiles, whiskers indicate the 1.5 of the inter-quartile range outside of the quartiles. Points outside this range is depicted as diamonds. Smaller dark dots show the correlation coefficient for individual simulations. Columns show low, medium and high values of $\beta$. }
  \label{fig:corr_initial_final}
\end{figure}

\begin{figure}[H]
    \centering
    \includegraphics[width=.8\linewidth]{../plots/overall/Tie_Dissolution_Correlations_Boxplot_Full.png}
  \caption{Correlations between absolute opinion and average path length. The Pearson Correlation Coefficient between the initial and final opinion of agents was calculated for all simulations. Boxes indicate the quartiles, whiskers indicate the 1.5 of the inter-quartile range outside of the quartiles. Points outside this range is depicted as diamonds. Smaller dark dots show the correlation coefficient for individual simulations. First plot has negative learning rate on the x-axis. Second plot shows the threshold on the x-axis. }
  \label{fig:corr_abs_path}
\end{figure}

We calculate two Pearson Correlation Coefficients of interest for all simulations. The first of which is the correlation coefficient between the initial opinions and the final opinions of agents, $\rho_{O_I, O_F}$. The second is the correlation between the absolute value of opinions and the average path length, $\rho_{|O|, APL}$.
We start by reporting the findings for $\rho_{O_I, O_F}$. When $\beta$ is low and threshold is high, there is little correlation between initial and final opinions. When the opposite is true, final and initial values are highly correlated (see Figure ~\ref{fig:corr_initial_final}). 
Next, we turn to $\rho_{|O|, APL}$. As the probability of tie-deletion increases, so does the correlation between the average path length of the network and the absolute value of opinions. When the probability of tie-deletion is 0, there is no consistent correlation between the two variables (see Figure ~\ref{fig:corr_abs_path}). 


\section{Discussion}

\subsection{Reiterating previous literature}

We first discuss the main effects of $\alpha$, $T$ and $\beta$. All of the effects of these parameters are intuitive and are in line with previous research on similar models \cite{flache_models_2017}. When $\alpha$ is high, there is a stronger force pulling the opinion of agent's closer together. Higher values of $\alpha$ therefore results in lower values of polarization (see Figure ~\ref{fig:alpha}). 
But as can be seen from the scale of the y-axis, although this is large effect, it is small in comparison to the effect of $\beta$ and $T$. Higher values of $\beta$ has more drastic effects on the polarization of the population (see Figure ~\ref{fig:beta}). 
This is primarily caused by the considered values of $T$ and its operationalization. When $\beta = 0$, all simulations reach a consensus (see Figure ~\ref{fig:radicalization}). If this simulation had considered lower values of $T$, this would most likely not be true. Lower values of $T$ are known to be able to produce clusters of opinions \cite{flache_models_2017,sasahara_social_2021}. When $\beta$ is large, almost all simulations polarize (see Figure ~\ref{fig:radicalization}). The reason for this is partly that in its operationalization, it is a stronger force than $\alpha$. The effect of pushing and pulling opinions is defined as being proportional to the distance between agents. 
By definition, agents that are pushed away from each other are further apart than agents that are pulling closer together. In this sense, $\beta$ is a stronger force than $\alpha$. Only in aggregate can the effect of $\alpha$ become stronger than the effect of $\beta$. This is only possible when the number of positive interactions is much higher than the number of negative interactions. The effect of $T$ should therefore not be surprising. With larger values of $T$, agents are more "open-minded" - they can cooperate with more diverse agents, and will therefore have much more positive interactions than negative. To see this, notice that if an agent has an opinion of 0 and $T\geq1$, this agent will not be able to have any negative interactions in this model. The opposite effect is witnessed when $T$ is low. This limits the subset of agents the agent can cooperate with, which makes negative interactions much more plausible.

\subsection{The effect of initial opinions}

The results indicate that in some conditions, there is a strong positive correlation between starting opinion of an agent and the final opinion of the agent. 
These are conditions of high negative influence and of low thresholds (see Figure ~\ref{fig:corr_initial_final}). These conditions are likely to lead to high degrees of polarization. The results indicate that in polarized conditions, agents will tend to move less than in conditions where they agents reach consensus. In conditions where agents do reach consensus, your starting position does not matter much. All agents will tend to be close to zero, no matter the starting condition. In polarizing conditions, agents will be very unlikely to move far from their starting position and will instead be pushed to the nearest extreme. 

\subsection{Tie-deletion facilitates cooperation}

Finally, one of the main findings of this paper is that higher probabilities of tie-deletion can prevent polarization and facilitate cooperation. This is especially the case when new ties are created via triadic closure and not randomly (see Figure ~\ref{fig:pd}). This happens because of two effects in the system. The first is that deleting negative ties will cause fewer negative social interactions, which limits the effect of $\beta$. When negative ties are deleted, agents will assort based on the their opinions. 
Deleting negative ties is important in its own right because it deletes ties that would otherwise cause further polarization. But because of assortment, the effect of tie-deletion interacts with how random new ties are created. When assortment on opinions is high, the heuristic that "a friend of a friend is also friend" is very likely true. Triadic closure will result in even more positive interactions, because similar to what is found in empirical networks, distance in the social network is highly indicative of distance in similarity \cite{kossinets_origins_2009}. When randomness is high, the probability of connecting to a very dissimilar agent is much higher than through triadic closure. In other words, increasing randomness decreases assortment, which leads to more negative encounters (see Figure ~\ref{fig:ntd}). This also echoes the finding from the opinion dynamics literature stating that when new connections are made randomly, opinions will tend to polarize more quickly when they include negative influence \cite{flache_why_2006,flache_small_2011,turner_paths_2018}. Here we show that reason for this effect is largely due to positive assortment of opinions. 
Positive assortment of opinions is also closely linked to the reason for the correlation between the absolute value of opinions and the average path length when tie-deletion is high. Because the network co-evolves with opinions when the average distance between opinions increase, the average distance in the network will increase as well. When opinions polarize, negative ties will tend to be deleted. Because of positive assortment, long-range ties will suffer especially when the network polarizes. This will make highways of information which connects distant parts of the network much less likely, which increases the average path length substantially. When the network depolarizes, the opposite happens. Some long range ties will be made by random, and because the network is depolarized, these will stay intact. This will make further long-range connections more probable, as the two clusters can connect via triadic closure.

\subsection{Distance in opinion and network space}
\begin{figure}[H]
    \centering
    \includegraphics[width=.8\linewidth]{../plots/example/Lineplot_Over_Time.png}
  \caption{Lineplot of opinions over time. X-axis shows time-steps of the simulation, y-axis shows the opinion of agents in the simulation. Colors show different values of $R$. All simulations were $T = 0.8$, $\alpha = 0.15$, $\beta = 0.1$, $P(D) = 1$ and with the same random seed.}
  \label{fig:lineplot}
\end{figure}

To further appreciate why tie-deletion facilitates cooperation, it is beneficial to examine representative simulations in more detail. Here we investigate one of the conditions, where threshold is relatively low ($T = 0.8$), there is some negative social influence ($\beta = 0.1$) and positive social influence ($\alpha = 0.15$). This combination of parameters only avoids polarization when tie-deletion is high for the reasons highlighted in the previous section. By focusing on these cases, we can inspect directly how the network evolves over time in relation to the opinions of its agents. 
The first thing to notice is the stark difference between the trajectory of opinions of different levels of randomness (see Figure ~\ref{fig:lineplot}). Only the simulation with $R=0.1$ avoids polarization. Additionally, when $R=0.5$, the polarization is much faster than when $R=0.3$. The second thing to notice is how closely the average path length follows the absolute value of opinions (see Figure ~\ref{fig:example_abs_opinion}, ~\ref{fig:example_path}). As mentioned, the mechanism that links these two variables is positive assortment. This can clearly be seen by inspecting the opinions of the agents in the network directly (see Figure ~\ref{fig:networks}). After only 2000 time-steps, there is a clear gradient in the networks, which is the result of positive assortment. Positive assortment is achieved directly by negative tie-deletion in this model. Additionally, positive assortment is increased indirectly by triadic closure. This is the same mechanism refered to as structural homophily in the literature \cite{asikainen_cumulative_2020,peixoto_disentangling_2022}. In other words, tie-deletion is not necessarily an important mechanism in itself. Rather, it is important because it increases positive assortment. I presume that any mechanism that will increase positive assortment in these kinds of models will decrease polarization. This point is also strengthened by the difference between the simulations considered here. Increasing randomness causes the network to polarize, because it decreases positive assortment. Counterintuitively, tie deletion in combination with triadic closure facilitates cooperation because it isolates groups, not despite it. 
Here we can also clearly see that polarization in opinions causes the network to become less connected, which increases the path length. To see why this happens, one can use a spring as an analogy for the network. As long-range ties are deleted, the tension in the spring rises, and the network starts to be better characterized as a network of two factions, connected mostly by a group of agents with values around 0. As distant parts of the network reconnect, the tension of the spring is lowered, and all the parts of the network become closely linked again. When polarization increases, there will be less of these long-range ties, but there might also be fewer middlemen to facilitate cooperation across the aisle. These middlemen are the nodes of cyan colors, that lie in the middle of the two major clusters of dark and light colors. These agents are critical for cooperation. Without them, the spring snaps. It does so because the different clusters cannot have positive interactions with each other as they are two far apart. By interacting only through these middlemen, there is a chance of bridging the gap. If these middlemen become part of either cluster before polarization has decreased sufficiently for the different groups to have positive interactions, the only possible outcome is polarization. Middlemen are therefore necessary conditions for cooperation in this model. 
It is also possible to give an alternative interpretation of what the probability of tie-deletion represents. The probability of tie-deletion can also be seen as how quickly the structure of the network is adjusted by opinions. In this interpretation, consensus can be achieved if the social network adjusts fast enough. Having faster adjustment of the structure of social interactions is critical, because the system is highly path dependent \cite{turner_paths_2018}.  When the network doesn’t adjust fast enough, agents will already have had several negative interactions, which will have pushed them further towards an extreme value of opinions. This will make them more likely to polarize other agents in the future. This will also be the case for middlemen. Adjusting too slowly can therefore burn the only bridge that is available for facilitating cooperation.  

\begin{figure}[H]
    \centering
    \includegraphics[width=.8\linewidth]{../plots/example/Example_Absolute_Opinion.png}
  \caption{Absolute opinions of representative simulations over time. X-axis shows time-steps, and the y-axis shows the absolute opinion of agents. Colors indicate different levels of randomness. Lines show single simulations over time which were simulated using the same random seed. These simulations had parameter values of $T = 0.8$, $\alpha = 0.15$, $\beta = 0.1$ and $P(D)=1$.}
  \label{fig:example_abs_opinion}
\end{figure}

\begin{figure}[H]
    \centering
    \includegraphics[width=.8\linewidth]{../plots/example/Example_Average_Path_Length.png}
  \caption{Average path length of representative simulations over time. X-axis shows time-steps, and the y-axis shows the average path length of the network. Colors indicate different levels of randomness. Lines show single simulations over time which were simulated using the same random seed. These simulations had parameter values of $T = 0.8$, $\alpha = 0.15$, $\beta = 0.1$ and $P(D)=1$.}
  \label{fig:example_path}
\end{figure}

\begin{figure}[H]
    \centering
    \includegraphics[width=.8\linewidth]{../plots/example/Example_Negative_Ties_Deleted.png}
  \caption{Negative ties deleted in representative simulations over time. X-axis shows time-steps, and the y-axis shows the cumulative frequency of negative ties deleted. Colors indicate different levels of randomness. Lines show single simulations over time which were simulated using the same random seed. These simulations had parameter values of $T = 0.8$, $\alpha = 0.15$, $\beta = 0.1$ and $P(D)=1$.}
  \label{fig:example_ntd}
\end{figure}

\newpage
\begin{center} 
    \begin{figure}[H]
        \centering
    \begin{tabular}{ccc} 
        $R = 0.1$ & $R = 0.3$ & $R = 0.5$ \\
    \includegraphics[width=.2\linewidth]{../plots/networks/network_example_R0.1_0.png} & \includegraphics[width=.2\linewidth]{../plots/networks/network_example_R0.3_0.png} & \includegraphics[width=.2\linewidth]{../plots/networks/network_example_R0.5_0.png}\\ 
    %\\\hline\\ 
    \includegraphics[width=.2\linewidth]{../plots/networks/network_example_R0.1_2000.png} & \includegraphics[width=.2\linewidth]{../plots/networks/network_example_R0.3_2000.png} & \includegraphics[width=.2\linewidth]{../plots/networks/network_example_R0.5_2000.png}\\ 
    %\\\hline\\ 
    \includegraphics[width=.2\linewidth]{../plots/networks/network_example_R0.1_4000.png} & \includegraphics[width=.2\linewidth]{../plots/networks/network_example_R0.3_4000.png} & \includegraphics[width=.2\linewidth]{../plots/networks/network_example_R0.5_4000.png}\\ 
    %\\\hline\\ 
    \includegraphics[width=.2\linewidth]{../plots/networks/network_example_R0.1_6000.png} & \includegraphics[width=.2\linewidth]{../plots/networks/network_example_R0.3_6000.png} & \includegraphics[width=.2\linewidth]{../plots/networks/network_example_R0.5_6000.png}\\  
    %\\\hline\\ 
    \includegraphics[width=.2\linewidth]{../plots/networks/network_example_R0.1_8000.png} & \includegraphics[width=.2\linewidth]{../plots/networks/network_example_R0.3_8000.png} & \includegraphics[width=.2\linewidth]{../plots/networks/network_example_R0.5_8000.png}\\  
    \includegraphics[width=.2\linewidth]{../plots/networks/network_example_R0.1_10000.png} & \includegraphics[width=.2\linewidth]{../plots/networks/network_example_R0.3_10000.png} & \includegraphics[width=.2\linewidth]{../plots/networks/network_example_R0.5_10000.png}\\  
    \end{tabular} 
    \caption{Network evolutions for different levels of randomness. Columns show different values of randomness, $R$. Rows are different time-steps of the simulations, increasing in increments of 2000. Agents are colored by their opinion. Dark blue colors represent values close to -1, and lighter colors represent opinions close to 1.} 
    \label{fig:networks} 
    \end{figure} 
\end{center} 

\section{Contrast to previous work}
It is important to understand why the results found here are in so stark contrast to the recent opinion dynamics models, which proposes that unfollowing dissimilar individuals accelerates polarization \cite{sasahara_social_2021}. First, the network they are considering is a directed network, meaning that relations need not be reciprocal. This could have important effects for the effects observed here, because it allows for social influence to be asymmetric. Secondly, the number of agents considered is only 100 instead of the 500 considered here. This could also be consequential. Tie-deletions can only facilitate cooperation if there are "middlemen", that can reunite the different clusters. Having enough diversity in opinions is critical for bridging the gap between distant opinions. Having more agents in the situations increases the number of expected agents with values close to 0, which can help in facilitating cooperation between agents of too different opinions. Finally, a critical difference between the model proposed here and the model that they considered is that this model includes negative social influence, $\beta$. Because of this, social relations that are outside of your boundary of confidence have no influence on you opinion. In other words, there are no “costs” associated with negative social interactions. For the parameter values considered in the model of this paper, tie-deletion is only effectively facilitating cooperation when there is negative social influence in the system. The reason for this is primarily that this paper does not consider very low values of the confidence boundary as it somewhat obscures the analysis, as the system’s behavior changes qualitatively below these values. Although their model is also a variation of a classic confidence boundary model \cite{flache_models_2017, sirbu2017opinion}, like the one proposed in this paper, they analyze much lower levels of boundaries of confidence. This has benefits and drawbacks. First, this allows more than two clusters of opinions. Second, it allows for the clusters of opinion to be centered at other values than the extreme of the opinion spectrum \cite{sasahara_social_2021}. These are definite positives, and similar features can also be generated by the model of this paper. However, the behavior of the system changes drastically when values of very low levels of boundary thresholds are studied, which makes a comprehensive review of the system as a whole much more complex to study.  
This echoes previous findings from two different literatures. First, facilitating cooperation via tie deletion recapitulates findings from computational biology, which states that positive assortment leads to increased levels of cooperation \cite{boyd_coordinated_2010,dakin_dynamic_2018, pepper_mechanism_2002,santos_cooperation_2006}. Second, more random new connections leading to more polarization is a stable finding in opinion dynamics models which include negative influence \cite{flache_why_2006,flache_small_2011,turner_paths_2018}. Here we show that these processes are interlinked.  

\section{Short comings and future work}

\subsection{On agent-based modelling}
A typical retort for agent-based models in general is that the researcher can generate any type of outcome which is congruent with their theory \cite{geschke2019triple}. 
I do not agree with this general conclusion. To allow for full transparency of the model and its conclusion, the entire code is available for anyone to reproduce. The code is fully documented and specifically designed to be easily readable.
The hope is that other researchers will be able to build, expand, validate or refute the proposed framework.


\subsection{Including Empirical Data}

Previous review articles have pointed to the fact that the field needs to include empirical data more in their studies of these dynamical systems \cite{flache_models_2017,noorazar_classical_2020,sirbu2017opinion}. Although I make the attempt to integrate and test the model with real empirical networks in this paper, we still need more data. One of the main problems with integrating the data into the models seems to be that these models require very specific data to be properly evaluated. What we really need is dynamical networks of social networks of opinions over time. Previous results have focused on measuring dynamical networks \cite{kossinets_origins_2009}, but including the opinions of the agents would be critical information to have for these types of models. If this data was available, it could be possible to identify how the patterns of the networks evolve over time. Although this paper shows that co-evolutionary models can better explain empirical opinionated networks, it does so by comparing the network to a snapshot of a real-world network. In other words, the fact that the co-evolutionary model fits better does not necessarily mean that it does so by implementing the real underlying mechanisms that gives rise to the patterns in the data. By having access to dynamical networks, it would be possible to identify the realism of the proposed mechanisms for both social influence and network formation. This data would also allow researchers to test more specific findings within this paper. Specifically, it would be possible to check whether increases in tie-deletion to dissimilar people decreases polarization. 

\subsection{Accurate perceptions of opinions}

An important limitation to this study is that interactions are assumed to be symmetrical and accurate. 
By interactions being symmetrical, I mean that agents push and pull on each other’s opinions by the same factor. 
This is most likely not an accurate reflection of reality. 
Individuals of an interacting dyad will probably move more or less than its counterpart. 
This has been modelled previously in related models to the one proposed here as either “stubbornness”, or situations where more extreme agents will be less likely to move \cite{flache_models_2017,ghaderi_opinion_2014,yildiz_binary_2013}. 
Although I believe the inclusion of this mechanism will increase the realism of this model, the mechanism of stubbornness is not a key variable of interest to this study. 
Stubbornness is nonetheless worth mentioning because it could interact with some of the variables of interest to this paper. 
If extreme agents are more stubborn, the system could become even more path dependent than it already is \cite{turner_paths_2018}. 
To see this, initial increases of polarization by chance encounters would lead to agents being more unlikely to change, which would make reaching consensus more implausible for the system. This could decrease the effect of tie-deletion on facilitating consensus, as agents would be more unlikely to overcome initial increases in polarization. 

A perhaps more critical flaw in the assumptions of the underlying mechanisms of this model is the lack of noise in interactions. 
It is highly unlikely that humans perceive or share opinions accurately. 
Instead, it is more reasonable to assume that people will sometimes misunderstand or misrepresent opinions \cite{jussim_influence_1989}. 
Opinion formation is likely skewed by the same cognitive heuristics and biases that shape other parts of how we include information into our decisions \cite{arceneaux_cognitive_2012}. This includes effects such as confirmation bias, which might play a vital role in how we update our opinions \cite{allahverdyan_opinion_2014}. 
Typically, models include noise in the interactions between agents to emulate imperfect communication \cite{sirbu2017opinion,su_noise_2017}. Noisy interactions could potentially play a vital role in facilitating cooperation, as it can allow agents that would not normally interact positively to perceive each other as more similar by chance \cite{allahverdyan_opinion_2014,su_noise_2017}. Including more realistic cognitive mechanisms might chance the dynamics of the system in important ways which are not considered in this model. 
One way of implementing this would be to reimagine updating one’s opinion as Bayesian updating considering other’s opinions as new evidence \cite{allahverdyan_opinion_2014}. This can be done by letting the opinion of an agent be described by a distribution instead of a single number. The distribution could be a normal distribution, where the mean gives the general opinion of an agent, and the standard deviation describes the certainty of the agent’s opinion.  

\subsection{Shrinking Variance}

Because no new agents are added to the network and because interactions are non-noisy, the variance in opinions shrinks over the course of time. At first glance, this might not seem very problematic. People tend to conform to the majority of their social groups \cite{mcpherson_birds_2001}, but we wouldn’t expect near perfect consensus on most issues facing us. Introducing mechanisms that keep a sufficient amount of variance would be more realistic but might also decrease the path dependency of the system. 
SAY SOMETHING ABOUT MODELS HAVING AGENTS TRYING TO BE DIFFERENT 

\subsection{Social influence exclusively}

The model investigated here assumes that one’s opinion is only changed by local interactions. Although this is in line with most models of opinion dynamics, there are good reasons to believe that global trends and tendencies are powerful forces that shapes opinion \cite{bener_empirical_2016}. These global tendencies might shape our opinions more and more, as media consumption rises. Global perturbations to the system could be powerful forces that potentially could have large impacts on whether the system can reach consensus. These forces would be especially counterproductive for reaching consensus, if they only influence certain parts of the system. The power of such effects is not hard to imagine – partisan news media is a vital piece of the puzzle of how opinions are formed \cite{pennycook_lazy_2019}. As media consumption rises and becomes a more and more important force for what information we receive, these force might already be a more important variable to consider than local interactions of agents \cite{bener_empirical_2016,stromback_dynamics_2013}. 
\section{A broader perspective}

The model investigated in this paper points to a possible mechanism for cooperation. 
As we have seen that mechanism is the coevolution of networks and opinions, which leads to distance in opinion space being closely linked to distance in network space. 
Whenever there is a possibility for negative interactions in the system, the speed of co-evolution becomes tantamount for whether the system reaches consensus or not. 
It is therefore interesting to see whether how connected we are and how much we disagree corresponds in empirical networks. 
As was pointed out in the introductory paragraph, polarization has been on the rise in many western democracies over the last two decades \cite{boxell_cross-country_2020,pew_research_center_political_2014}. On the other hand, estimations of the average path length between users on Facebook has decreased from 2011 to 2016 \cite{bhagat_three_2016}. The coevolutionary model investigated in this paper suggests that the increase in connectivity and the simultaneous increase in polarization could be a bad omen. If anything like negative influence characterizes interactions on social media (i.e. outrage), the decrease in average path length will make negative encounters more likely, and most likely increase rather than decrease polarization. Although being more connected might sound good on paper, it might be detrimental to our ability to cooperate in the long run. This effect is congruent with previous literature, where the introduction of long-range ties sharply increases polarization of opinions in the population \cite{flache_small_2011,turner_paths_2018}.

\section{Conclusion}

\bibliographystyle{apacite}

\bibliography{References}

\end{document}